<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>List of Persons</title>
 <style>
    table {
      width: 60%;
      border-collapse: collapse;
      border: 2px solid black;
      border-radius: 10px;
      margin: 50px auto;
    }

    th, td {
      border: 1px solid black;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #f0f0f0;
    }

    caption {
      caption-side: top;
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 10px;
    }

    table, th, td {
      border-radius: 8px;
    }
 </style>
</head>
<body>

 <table>
   <caption>List of Persons</caption>
   <tr>
     <th>Srno</th>
     <th>Person Name</th>
     <th>Age</th>
     <th>Country</th>
   </tr>
   <tr>
     <td>1</td>
     <td></td>
     <td></td>
     <td></td>
   </tr>
   <tr>
     <td>2</td>
     <td></td>
     <td></td>
     <td></td>
   </tr>
   <tr>
     <td>3</td>
     <td></td>
     <td></td>
     <td></td>
   </tr>
 </table>

</body>
</html>


// MongoDB Start From Here 

// 1. Model the following database. Many employees working on one project.
//    A company has various ongoing projects.

// 2. Assume appropriate attributes and collections as per the query requirements.

// 3. Insert at least 5 documents in each collection.

use ProjectDB

// Employees Collection = id, name, position
db.employees.insertMany([
 { _id: 1, name: "Mr. Patil", position: "Developer" },
 { _id: 2, name: "Ms. Sharma", position: "Tester" },
 { _id: 3, name: "Mr. Kumar", position: "Manager" },
 { _id: 4, name: "Ms. Joshi", position: "Developer" },
 { _id: 5, name: "Mr. Reddy", position: "Designer" }
]);

// Projects Collection = id, name, type, duration
db.projects.insertMany([
 { _id: 1, name: "Project Alpha", type: "Web", duration_months: 4 },
 { _id: 2, name: "Project Beta", type: "Mobile", duration_months: 6 },
 { _id: 3, name: "Project Gamma", type: "Web", duration_months: 2 },
 { _id: 4, name: "Project Delta", type: "AI", duration_months: 5 },
 { _id: 5, name: "Project Epsilon", type: "Web", duration_months: 3 }
]);

// Employee_Projects Collection (many-to-many relation) = employee_id, project_id
db.employee_projects.insertMany([
 { employee_id: 1, project_id: 1 },
 { employee_id: 1, project_id: 3 },
 { employee_id: 2, project_id: 2 },
 { employee_id: 3, project_id: 1 },
 { employee_id: 4, project_id: 1 },
 { employee_id: 4, project_id: 4 },
 { employee_id: 5, project_id: 5 },
 { employee_id: 2, project_id: 4 }
]);

// Queries

// a. List all names of projects where Project_type = .....
db.projects.find({ type: "Web" }, { _id: 0, name: 1 })

// b. List all the projects with duration greater than 3 months
db.projects.find({ duration_months: { $gt: 3 } }, { _id: 0, name: 1, duration_months: 1 })

// c. Count no. of employees working on ........project
db.employee_projects.countDocuments({
  project_id: db.projects.findOne({ name: "Project Alpha" })._id
})

// d. List the names of projects on which Mr. Patil is working
db.projects.find(
  {
    _id: {
      $in: db.employee_projects
              .find({ employee_id: db.employees.findOne({ name: "Mr. Patil" })._id })
              .toArray()
              .map(ep => ep.project_id)
    }
  },
  { _id: 0, name: 1 }
)
