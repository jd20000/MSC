// Q1: Check if a given file exists in current directory
#include <stdio.h>
#include <dirent.h>
#include <string.h>

int main(int argc, char *argv[]) {
    if (argc != 2) {
        printf("Usage: %s <filename>\n", argv[0]);
        return 1;
    }

    DIR *dir;
    struct dirent *entry;
    int found = 0;

    dir = opendir(".");
    if (dir == NULL) {
        perror("Unable to open directory");
        return 1;
    }

    while ((entry = readdir(dir)) != NULL) {
        if (strcmp(entry->d_name, argv[1]) == 0) {
            found = 1;
            break;
        }
    }

    closedir(dir);

    if (found)
        printf("File '%s' is present in current directory.\n", argv[1]);
    else
        printf("File '%s' is NOT present in current directory.\n", argv[1]);

    return 0;
}


// Q2: Unnamed Pipe - Child writes messages, Parent reads them
#include <stdio.h>
#include <unistd.h>
#include <string.h>

int main() {
    int fd[2];
    pid_t pid;
    char buffer[100];

    if (pipe(fd) == -1) {
        perror("Pipe failed");
        return 1;
    }

    pid = fork();

    if (pid < 0) {
        perror("Fork failed");
        return 1;
    }

    if (pid == 0) {
        // Child process: write messages
        close(fd[0]); // close read end
        char *msg1 = "Hello World";
        char *msg2 = "Hello SPPU";
        char *msg3 = "Linux is Funny";

        write(fd[1], msg1, strlen(msg1) + 1);
        write(fd[1], msg2, strlen(msg2) + 1);
        write(fd[1], msg3, strlen(msg3) + 1);

        close(fd[1]);
    } else {
        // Parent process: read messages
        close(fd[1]); // close write end

        printf("Parent reading messages from pipe:\n");
        while (read(fd[0], buffer, sizeof(buffer)) > 0) {
            printf("%s\n", buffer);
        }

        close(fd[0]);
    }

    return 0;
}
